{% extends 'base.template.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load cloudinary %}

{%block content%}

<body>
    <h1>Books</h1>
        <form method="GET">
    {{search_form|crispy}}
    <input type="submit" value="Search"/>
    </form>
    {% if request.user.is_authenticated  %}
    <p>Welcome {{request.user}}</p>
    {% else %}
    <p>Please <a href="/accounts/login">Login</a></p>
    {%endif%}
    <p>
        Here you can see all the books that we have.
    </p>
    <ul>
        {%for book in books %}
        <li>{{book.title}}
            {% cloudinary book.cover %}
            <a href="{% url 'update_book_route' book_id=book.id %}">Edit</a>
            <a href="{% url 'add_to_cart' book_id=book.id %}">Add to Cart</a>  
        </li>
        {%endfor%}
    </ul>
</body>
{%endblock%}